# ุฏููู ูุธุงู ุงูุนุฑูุถ (Offers System)

## ูุธุฑุฉ ุนุงูุฉ
ุชู ุชุทููุฑ ูุธุงู ุงูุนุฑูุถ ุงูุฏููุงูููู ุงูุฐู ูุณูุญ ุจุฅุถุงูุฉ ุนุฑูุถ ุชุฑููุฌูุฉ ูุนุฑุถูุง ุนูู ุงููููุน ุจุดูู ุชููุงุฆู.

## ุงูุจููุฉ ุงูุชูููุฉ

### Backend (Django)

#### 1. ุงููููุฐุฌ (Model) - `Offer`
ููุฌูุฏ ูู `backend/listings/models.py`

**ุงูุญููู:**
```python
- title: ุนููุงู ุงูุนุฑุถ
- description: ูุตู ุงูุนุฑุถ
- discount_percentage: ูุณุจุฉ ุงูุฎุตู (0-100)
- target_audience: ุงููุฆุฉ ุงููุณุชูุฏูุฉ (ุทูุงุจ/ุนุงุฆูุงุช/ุงูุฌููุน)
- is_active: ูู ุงูุนุฑุถ ูุดุท
- start_date: ุชุงุฑูุฎ ุจุฏุงูุฉ ุงูุนุฑุถ
- end_date: ุชุงุฑูุฎ ููุงูุฉ ุงูุนุฑุถ
- icon_type: ููุน ุงูุฃููููุฉ (graduation/gift/star/sparkles)
- terms: ุดุฑูุท ุงูุนุฑุถ
```

#### 2. API Endpoint
- **URL**: `/api/listings/offers/`
- **Method**: GET
- **ุงููุตูู**: ุนุงู (ูุง ูุชุทูุจ ูุตุงุฏูุฉ)

**Endpoints ุงููุชุงุญุฉ:**
```
GET /api/listings/offers/active/           - ุฌูุจ ุฌููุน ุงูุนุฑูุถ ุงููุดุทุฉ
GET /api/listings/offers/by_audience/      - ุฌูุจ ุงูุนุฑูุถ ุญุณุจ ุงููุฆุฉ ุงููุณุชูุฏูุฉ
```

#### 3. Django Admin
- ุงููุตูู ุนุจุฑ: `/admin/listings/offer/`
- ุฅููุงููุฉ ุฅุถุงูุฉ/ุชุนุฏูู/ุญุฐู ุงูุนุฑูุถ
- ุนุฑุถ ุญุงูุฉ ุงูุนุฑุถ (ูุดุท/ุงูุชูู/ูุฑูุจุงู/ูุนุทู)

---

## ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุฅุถุงูุฉ ุนุฑุถ ุฌุฏูุฏ ูู Django Admin

1. ุงุฐูุจ ุฅูู: `http://localhost:8000/admin/`
2. ุงุฎุชุฑ `ุงูุนุฑูุถ` ูู ุงููุงุฆูุฉ ุงููุณุฑู
3. ุงุถุบุท ุนูู `Add Offer` (ุฅุถุงูุฉ ุนุฑุถ ุฌุฏูุฏ)
4. ุฃููู ุงูุจูุงูุงุช:

**ูุซุงู:**
```
ุงูุนููุงู: ุฎุตููุงุช ุญุตุฑูุฉ ููุทูุงุจ
ุงููุตู: ุฎุตู ูุตู ุฅูู 30% ุนูู ุฅูุฌุงุฑ ุงูุดูู ุจุงููุฑุจ ูู ุฌุงูุนุชู
ูุณุจุฉ ุงูุฎุตู: 30
ุงููุฆุฉ ุงููุณุชูุฏูุฉ: ุทูุงุจ
ููุน ุงูุฃููููุฉ: ุชุฎุฑุฌ
ุชุงุฑูุฎ ุงูุจุฏุงูุฉ: 2024-01-22 10:00 AM
ุชุงุฑูุฎ ุงูููุงูุฉ: 2024-02-22 10:00 AM
ุงูุดุฑูุท: ููุทูุจ ุฅุซุจุงุช ุงููููุฉ ุงูุทูุงุจูุฉ
ูุดุท: โ (ููุนู)
```

5. ุงุถุบุท `Save` (ุญูุธ)

### 2. ุชุนุฏูู ุนุฑุถ ููุฌูุฏ
- ูู ูุงุฆูุฉ ุงูุนุฑูุถ ูู Admin
- ุงุฎุชุฑ ุงูุนุฑุถ ุงููุฑุงุฏ ุชุนุฏููู
- ุนุฏูู ุงูุจูุงูุงุช ุงููุทููุจุฉ
- ุงุถุบุท Save

### 3. ุญุฐู ุนุฑุถ
- ูู ูุงุฆูุฉ ุงูุนุฑูุถ ูู Admin
- ุงุฎุชุฑ ุงูุนุฑุถ ุงููุฑุงุฏ ุญุฐูู
- ุงุถุบุท Delete (ุญุฐู)

---

## Frontend (React)

### ุงููููู: `StudentOfferModal`
ููุฌูุฏ ูู `src/components/StudentOfferModal.tsx`

**ุงูุฎุตุงุฆุต:**
- ูุธูุฑ ุชููุงุฆูุงู ุนูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ุจุนุฏ 1.5 ุซุงููุฉ
- ูุฌูุจ ุงูุจูุงูุงุช ูู API ุชููุงุฆูุงู
- ูุง ูุธูุฑ ุฅุฐุง ูู ููู ููุงู ุนุฑุถ ูุดุท
- ูุนุฑุถ ุงูุฃููููุฉ ูุงููุณุจุฉ ุงููุฆููุฉ ูุงููุตู ูุงูุดุฑูุท
- ุฒุฑ "ุชุตูุญ ุงูุนุฑูุถ" ููุฌู ููุตูุญุฉ `/properties?discount=true`

**ุงูุชุฏูู:**
1. ุนูุฏ ุฏุฎูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
2. ูุฌูุจ ุงูุจูุงูุงุช ูู API
3. ุจุนุฏ 1.5 ุซุงููุฉุ ูุนุฑุถ ุงูููุฏุงู
4. ุงููุณุชุฎุฏู ููููู ุงูุฅุบูุงู ุฃู ุงูุฐูุงุจ ูุตูุญุฉ ุงูุนุฑูุถ

---

## ุงูุญุงูุงุช ุงูููููุฉ

### ุญุงูุงุช ุนุฑุถ ุงูุนุฑุถ:
โ **ูุดุท** - ุงูุนุฑุถ ููุนู ูุชุงุฑูุฎ ุงูุจุฏุงูุฉ ูุถู ูุงูููุงูุฉ ูู ุชุฃุชู ุจุนุฏ
โฐ **ูุฑูุจุงู** - ุงูุนุฑุถ ููุนู ููู ุชุงุฑูุฎ ุงูุจุฏุงูุฉ ูู ูุฃุชู ุจุนุฏ
โ **ุงูุชูู** - ุงูุนุฑุถ ููุนู ููู ุชุงุฑูุฎ ุงูููุงูุฉ ูุถู
โช **ูุนุทู** - ุงูุนุฑุถ ุบูุฑ ููุนู

**ููุงุญุธุฉ:** ูุธูุฑ ุงูููุฏุงู ููุท ููุนุฑูุถ ูู ุญุงูุฉ **ูุดุท**

---

## ุฃูุซูุฉ ุงุณุชุฎุฏุงู API

### ุฌูุจ ุฌููุน ุงูุนุฑูุถ ุงููุดุทุฉ:
```bash
curl http://localhost:8000/api/listings/offers/active/
```

**ุงูุฑุฏ:**
```json
[
  {
    "id": 1,
    "title": "ุฎุตููุงุช ุญุตุฑูุฉ ููุทูุงุจ",
    "description": "ุฎุตู ูุตู ุฅูู 30% ุนูู ุฅูุฌุงุฑ ุงูุดูู",
    "discount_percentage": 30,
    "target_audience": "students",
    "is_active": true,
    "start_date": "2024-01-22T10:00:00Z",
    "end_date": "2024-02-22T10:00:00Z",
    "icon_type": "graduation",
    "terms": "ููุทูุจ ุฅุซุจุงุช ุงููููุฉ ุงูุทูุงุจูุฉ"
  }
]
```

### ุฌูุจ ุงูุนุฑูุถ ุญุณุจ ุงููุฆุฉ:
```bash
curl http://localhost:8000/api/listings/offers/by_audience/?audience=students
```

---

## ููุงุญุธุงุช ูููุฉ

1. **ุงูุชูููุช:** ูุชู ุงูุชุญูู ูู ุตุญุฉ ุงูุชูุงุฑูุฎ ุชููุงุฆูุงู
2. **ุงููุณุจุฉ:** ูุฌุจ ุฃู ุชููู ุจูู 0 ู 100
3. **ุงูุฃููููุงุช ุงููุชุงุญุฉ:**
   - `graduation` (ุชุฎุฑุฌ)
   - `gift` (ูุฏูุฉ)
   - `star` (ูุฌูุฉ)
   - `sparkles` (ุจุฑุงู)

4. **ุงููุฆุงุช ุงููุณุชูุฏูุฉ:**
   - `students` (ุทูุงุจ)
   - `families` (ุนุงุฆูุงุช)
   - `all` (ุงูุฌููุน)

---

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงูููุฏุงู ูุง ูุธูุฑ:
- ุชุญูู ูู ูุฌูุฏ ุนุฑุถ ูุดุท ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุชุฃูุฏ ูู ุฃู `is_active = true`
- ุชุฃูุฏ ูู ุฃู ุงูุชุงุฑูุฎ ุงูุญุงูู ุจูู `start_date` ู `end_date`
- ุงูุชุญ console ูู ุงููุชุตูุญ ูุชุญูู ูู ุงูุฃุฎุทุงุก

### API ูุง ูุนูุฏ ุจูุงูุงุช:
```bash
# ุชุญูู ูู ุงูู URL
curl http://localhost:8000/api/listings/offers/active/ -v
```

---

## ุงููููุงุช ุงููุชุฃุซุฑุฉ:

### Backend:
- `backend/listings/models.py` - ุงููููุฐุฌ ุงูุฌุฏูุฏ
- `backend/listings/serializers.py` - Serializer ุงูุฌุฏูุฏ
- `backend/listings/views.py` - ViewSet ุงูุฌุฏูุฏ
- `backend/listings/urls.py` - ุงูุชูุฌูู ุงูุฌุฏูุฏ
- `backend/listings/admin.py` - ุชุณุฌูู ูู Admin
- `backend/listings/migrations/0013_offer.py` - Migration

### Frontend:
- `src/components/StudentOfferModal.tsx` - ุงููููู ุงููุญุฏูุซ

---

## ุงูุฎุทูุงุช ุงูุชุงููุฉ ุงูููุชุฑุญุฉ:

1. โ ูููุฐุฌ ูุงุนุฏุฉ ุจูุงูุงุช ูุงูู
2. โ API endpoints ูุชูุงููุฉ
3. โ Django Admin interface
4. โ ูููู React ุฏููุงูููู
5. ๐ ูููู ุฅุถุงูุฉ: ููุงุชุฑ ูุชูุฏูุฉุ ุนุฑุถ ุชุงุฑูุฎ ุงูุชูุงุก ุงูุนุฑุถุ ุชุญูููุงุช

---

**ุขุฎุฑ ุชุญุฏูุซ:** 2026-01-22
**ุงูุญุงูุฉ:** ุฌุงูุฒ ููุงุณุชุฎุฏุงู
