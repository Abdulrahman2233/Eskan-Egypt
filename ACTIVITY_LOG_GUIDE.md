# Activity Log System Documentation

## ูุธุงู ุชุณุฌูู ุงููุดุงุท - ุฏููู ุงูุงุณุชุฎุฏุงู

### ๐ ูุธุฑุฉ ุนุงูุฉ
ุชู ุฅุถุงูุฉ ูุธุงู ุดุงูู ูุชุณุฌูู ุฌููุน ุฃูุดุทุฉ ุงููุณุชุฎุฏููู ุชููุงุฆูุงู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช Django. ูุฐุง ุงููุธุงู ูุณุฌู:
- **ุฅุถุงูุฉ ุนูุงุฑุงุช ุฌุฏูุฏุฉ** (Create Property)
- **ุญุฐู ุนูุงุฑุงุช** (Delete Property)
- **ุชุญุฏูุซ ูุนูููุงุช ุงูุนูุงุฑุงุช** (Update Property)
- **ุฅูุดุงุก ุญุณุงุจุงุช ุฌุฏูุฏุฉ** (Create User Account)
- **ุงูููุงููุฉ ุนูู ุงูุนูุงุฑุงุช** (Approve Property)
- **ุฑูุถ ุงูุนูุงุฑุงุช** (Reject Property)

### ๐ง ุงูููููุงุช ุงููุถุงูุฉ

#### 1. **ูููุฐุฌ ActivityLog** (`listings/models.py`)
```python
class ActivityLog(models.Model):
    user                # ุงููุณุชุฎุฏู ุงูุฐู ูุงู ุจุงููุดุงุท
    action              # ููุน ุงููุดุงุท (ุฅุถุงูุฉุ ุญุฐูุ ุฅูุฎ)
    content_type        # ููุน ุงููุญุชูู (ุนูุงุฑุ ูุณุชุฎุฏู)
    object_id           # ูุนุฑู ุงููุงุฆู
    object_name         # ุงุณู ุงููุงุฆู
    description         # ูุตู ุงููุดุงุท
    ip_address          # ุนููุงู IP (ุงุฎุชูุงุฑู)
    timestamp           # ุชูููุช ุงููุดุงุท (ุชููุงุฆู)
```

#### 2. **ูุธุงู Signals** (`listings/signals.py`)
ุชู ุฅูุดุงุก 3 signals ูุชุณุฌูู ุงูุฃูุดุทุฉ ุชููุงุฆูุงู:
- `log_property_activity`: ูุณุฌู ุฅุถุงูุฉ ูุชุนุฏูู ุงูุนูุงุฑุงุช
- `log_property_deletion`: ูุณุฌู ุญุฐู ุงูุนูุงุฑุงุช
- `log_user_creation`: ูุณุฌู ุฅูุดุงุก ุญุณุงุจุงุช ุฌุฏูุฏุฉ

#### 3. **ูุงุฌูุฉ Admin ูุญุณููุฉ** (`listings/admin.py`)
ุชู ุฅุถุงูุฉ ุตูุญุฉ ุฅุฏุงุฑุฉ ูุฎุตุตุฉ ูุนุฑุถ ูุชุตููุฉ ุณุฌูุงุช ุงููุดุงุท ูุน:
- ุนุฑุถ ูููู ูุฃููุงุน ุงูุฃูุดุทุฉ
- ุชุตููุฉ ุญุณุจ ุงููุณุชุฎุฏู ูุงููุดุงุท ูุงูุชุงุฑูุฎ
- ุจุญุซ ูู ุฃุณูุงุก ุงููุงุฆูุงุช ูุงููุนุฑูุงุช
- ููุน ุงูุญุฐู ูุงูุชุนุฏูู ุงููุฏูู (ููุญูุงุธ ุนูู ุงูุณุฌู)

### ๐ ุงููุตูู ุฅูู ุณุฌูุงุช ุงููุดุงุท

#### ูู ุฎูุงู Django Admin
1. ุงุฐูุจ ุฅูู `http://localhost:8000/admin/`
2. ุงุฎุชุฑ **ุณุฌูุงุช ุงููุดุงุท** ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ
3. ููููู:
   - ุนุฑุถ ุฌููุน ุงูุฃูุดุทุฉ ูุฑุชุจุฉ ุญุณุจ ุงูููุช (ุงูุฃุญุฏุซ ุฃููุงู)
   - ุงูุจุญุซ ุนู ูุดุงุท ูุนูู
   - ุชุตููุฉ ุญุณุจ ููุน ุงููุดุงุท ุฃู ุงููุณุชุฎุฏู ุฃู ุงูุชุงุฑูุฎ

#### ูู ุฎูุงู Django Shell
```python
python manage.py shell

# ุนุฑุถ ุฌููุน ุงูุฃูุดุทุฉ
from listings.models import ActivityLog
activities = ActivityLog.objects.all()

# ุนุฑุถ ุฃูุดุทุฉ ูุณุชุฎุฏู ูุนูู
user = UserProfile.objects.get(user__username='username')
user_activities = ActivityLog.objects.filter(user=user)

# ุนุฑุถ ุฃูุดุทุฉ ุงูููู
from django.utils import timezone
from datetime import timedelta
today = timezone.now().date()
today_activities = ActivityLog.objects.filter(
    timestamp__date=today
)

# ุนุฑุถ ุฃูุดุทุฉ ูุนููุฉ (ูุซู ุฅุถุงูุฉ ุนูุงุฑุงุช ููุท)
new_properties = ActivityLog.objects.filter(action='create_property')

# ุนุฑุถ ุชูุงุตูู ูุดุงุท
activity = ActivityLog.objects.first()
print(f"User: {activity.user}")
print(f"Action: {activity.get_action_display()}")
print(f"Object: {activity.object_name}")
print(f"Time: {activity.timestamp}")
print(f"Description: {activity.description}")
```

### ๐ฏ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

โ **ุชุณุฌูู ุชููุงุฆู**: ูุง ุชุญุชุงุฌ ูุฃู ุชุบููุฑุงุช ูู ุงูููุฏ - ูุชู ุงูุชุณุฌูู ุชููุงุฆูุงู  
โ **ูุง ูุคุซุฑ ุนูู ุงูุฃุฏุงุก**: ูุชู ุงูุชุณุฌูู ูู ุทูุจ ูููุตู  
โ **ุขูู ูู ุงูุฃุฎุทุงุก**: ูู ุญุงูุฉ ูุดู ุงูุชุณุฌูู ูู ูุคุซุฑ ุนูู ุงูุนูููุฉ ุงูุฃุณุงุณูุฉ  
โ **ุณูู ุงูุจุญุซ ูุงูุชุตููุฉ**: ูุงุฌูุฉ admin ูุชูุฏูุฉ ููุจุญุซ ูุงูุชุตููุฉ  
โ **ุญูุงูุฉ ุงูุจูุงูุงุช**: ูููุน ุงูุญุฐู ูุงูุชุนุฏูู ูู admin ูุถูุงู ุญูุธ ุงูุณุฌู  
โ **ุจุญุซ ุณุฑูุน**: ูุฏุนู ุงูุจุญุซ ุนู ุงููุณุชุฎุฏููู ูุงููุงุฆูุงุช  
โ **ููุงุฑุณ ูุงุนุฏุฉ ุงูุจูุงูุงุช**: ูุญุณูู ููุฃุฏุงุก ูุน ุงููุซูุฑ ูู ุงูุณุฌูุงุช  

### ๐ ุฃูุซูุฉ ุนูู ุงูุณุฌูุงุช ุงูุชู ุณูุชู ุชุณุฌูููุง

#### ูุซุงู 1: ุฅุถุงูุฉ ุนูุงุฑ ุฌุฏูุฏ
```
ููุน ุงููุดุงุท: ุฅุถุงูุฉ ุนูุงุฑ ุฌุฏูุฏ โ
ุงููุณุชุฎุฏู: ูุญูุฏ ุฃุญูุฏ
ููุน ุงููุญุชูู: ุนูุงุฑ
ุงููุงุฆู: ุดูุฉ ูุงุฎุฑุฉ ูู ุงููุงูุฑุฉ
ุงููุตู: ุชู ุฅุถุงูุฉ ุนูุงุฑ ุฌุฏูุฏ: ุดูุฉ ูุงุฎุฑุฉ ูู ุงููุงูุฑุฉ ูู ููุทูุฉ ูุตุฑ ุงูุฌุฏูุฏุฉ
ุงูููุช: 2026-01-25 14:30:45
```

#### ูุซุงู 2: ุญุฐู ุนูุงุฑ
```
ููุน ุงููุดุงุท: ุญุฐู ุนูุงุฑ โ
ุงููุณุชุฎุฏู: ูุงุทูุฉ ุนูู
ููุน ุงููุญุชูู: ุนูุงุฑ
ุงููุงุฆู: ููุฒู ูุฏูู ุจุงูุฅุณููุฏุฑูุฉ
ุงููุตู: ุชู ุญุฐู ุงูุนูุงุฑ: ููุฒู ูุฏูู ุจุงูุฅุณููุฏุฑูุฉ
ุงูููุช: 2026-01-25 15:20:10
```

#### ูุซุงู 3: ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ
```
ููุน ุงููุดุงุท: ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ ๐ค
ุงููุณุชุฎุฏู: ุณุงุฑุฉ ูุญููุฏ
ููุน ุงููุญุชูู: ูุณุชุฎุฏู
ุงููุงุฆู: ุณุงุฑุฉ ูุญููุฏ
ุงููุตู: ุชู ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ: ุณุงุฑุฉ ูุญููุฏ - ูุงูู ุนูุงุฑ
ุงูููุช: 2026-01-25 10:00:00
```

### ๐ ุงูุฃูุงู ูุงูุฎุตูุตูุฉ

- ุฌููุน ุงูุฃูุดุทุฉ ูุฑุชุจุทุฉ ุจุญุณุงุจ ุงููุณุชุฎุฏู ุงููุนูู
- ูุชู ุญูุธ ุนููุงู IP ุนูุฏ ุชููุฑู (ูููู ุฅุถุงูุชู ูุงุญูุงู ูู middleware)
- ุงูุณุฌูุงุช ูุญููุฉ ูู ุงูุญุฐู ูุงูุชุนุฏูู
- ุงููุตูู ููุณุฌูุงุช ูุชุทูุจ ุตูุงุญูุงุช Admin

### โ๏ธ ุงูุชุฎุตูุต ุงููุณุชูุจูู

ูููู ุชูุณูุน ุงููุธุงู ูุงุญูุงู ูุชุถููู:
- ุนููุงู IP ุงูุชููุงุฆู ูู ุงูุทูุจุงุช HTTP
- ูุนูููุงุช ุงูุฌูุงุฒ ูุงููุชุตูุญ
- ูุณุฎ ุงุญุชูุงุทูุฉ ูู ุงูุจูุงูุงุช ุงููุฏููุฉ
- ุชูุงุฑูุฑ ุดูุฑูุฉ/ุณูููุฉ
- ุชุตุฏูุฑ ุงูุจูุงูุงุช ุฅูู ูููุงุช CSV/Excel
- API endpoint ูููุตูู ูู ุงูู Frontend

### ๐ ูุง ุชุฃุซูุฑ ุนูู ุงูู Frontend

โ **ูุง ุชูุฌุฏ ุฃู ุชุบููุฑุงุช ูู ุงูู Frontend**  
โ **ุงููุธุงู ูุนูู ุชูุงูุงู ูู ุงูู Backend ููุท**  
โ **ูุชู ุงูุชุณุฌูู ุจุดูู ุชููุงุฆู ุฏูู ุชุฏุฎู ุงูุนููู**  

---

**ุชู ุงูุฅูุดุงุก ุจูุฌุงุญ! โจ**
